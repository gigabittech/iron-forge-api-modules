"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.genValuesList=genValuesList;const lodash_1=__importDefault(require("lodash"));function genValuesList(objects,fnObject2Values){const nestedValueList=lodash_1.default.map(objects,(object=>fnObject2Values(object)));if(nestedValueList.length>0){const arrayLength=nestedValueList[0].length;if(lodash_1.default.some(nestedValueList,(list=>list.length!==arrayLength))){throw new Error("GEN_VALUES_LIST__ALL_ARRAYS_MUST_HAVE_SAME_LENGTH")}}const qMarkStrings=lodash_1.default.map(nestedValueList,(valueList=>{const qMarks=lodash_1.default.map(valueList,(value=>{const sqlType=lodash_1.default.isObject(value)?value.sqlType:undefined;return sqlType?`?::${sqlType}`:"?"}));return`(${qMarks.join(", ")})`}));const entireQMarkString=qMarkStrings.join(", ");const sqlValueList=lodash_1.default.flatMap(nestedValueList,(valueList=>lodash_1.default.map(valueList,(value=>lodash_1.default.isObject(value)?value.value:value))));return{qMarkString:entireQMarkString,valueList:sqlValueList}}