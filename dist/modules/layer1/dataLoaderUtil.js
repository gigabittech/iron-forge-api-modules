"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.makeDataLoader=makeDataLoader;exports.makeDataLoaderUsingNameKey=makeDataLoaderUsingNameKey;exports.filterNonErrors=filterNonErrors;const lodash_1=__importDefault(require("lodash"));const dataloader_1=__importDefault(require("dataloader"));function makeDataLoader(fnGetObjectsById){return new dataloader_1.default((async ids=>{const objects=await fnGetObjectsById(ids);const objectsById=lodash_1.default.keyBy(objects,(object=>object.id));return lodash_1.default.map(ids,(id=>objectsById[id]))}))}function makeDataLoaderUsingNameKey(fnGetObjectsByName){return new dataloader_1.default((async names=>{const objects=await fnGetObjectsByName(names);const objectsByName=lodash_1.default.keyBy(objects,(object=>object.name));return lodash_1.default.map(names,(name=>objectsByName[name]))}))}function filterNonErrors(results){return lodash_1.default.filter(results,(result=>!(result instanceof Error)))}